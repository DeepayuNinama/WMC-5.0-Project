<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mafia | Dashboard</title>
    <!-- Font -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />



    <!-- CSS LINK -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
        *{
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            scroll-padding-top: 2rem;
            scroll-behavior: smooth;
            box-sizing: border-box;
            list-style: none;
            text-decoration: none;
            cursor: url(../image/cursor.png), auto;
        }

        body{
            background-color: #f1f1f1;
        }
        h2{
            color: #ffffff;
        }
        

        :root{
            --main-color: #131924;
            --text-color: #131924;
            --bg-color: #fff;
        }
        body::-webkit-scrollbar{
            display: none;
        }

        .cart::-webkit-scrollbar{
            display: none;
        }
        img{
            width: 100%;
        }
        .container{
            max-width: 1200px;
            margin: auto;
            width: 100%;
            color: #fff;
        }
        /* header{
            position: fixed;
            color: #fff;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--text-color);
            box-shadow: 0 1px 4px hsl(0 4% 15% / 10%);
            z-index: 100;
        }
        .nav{
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
        }
        .textnew{
            color: white;
        }
        .nav i{
            color: #171427;
        }
        .logo{
            font-size: 2rem;
            color: var(--bg-color);
            font-weight: 600;
        }
        .navlist{
            color: #fff;
        }
        .navlist{
            justify-content: space-around;
        } */
        #cart-icon{
            font-size: 1.5rem;
            color: #ffffff;
            font-weight: 500;
        } 

        .nav-menu #cart-icon{
            margin-left: 40px;
        }


        .nav{
            position: fixed;
            top: 0;
            display: flex;
            justify-content: space-around;
            width: 100%;
            height: 100px;
            line-height: 100px;
            background: linear-gradient(rgba(39,39,39, 0.6), transparent);
            z-index: 3;
        }
        .nav-logo p{
            color: white;
            font-size: 25px;
            font-weight: 600;
        }
        .nav-menu ul{
            display: flex;
        }
        .nav-menu ul li{
            list-style-type: none;
        }
        .nav-menu ul li .link{
            text-decoration: none;
            font-weight: 500;
            color: #fff;
            padding-bottom: 10px;
            margin: 0 25px;
        }
        .link:hover, .active{
            border-bottom: 2px solid #fff;
        }
        .nav-button .btn{
            width: 130px;
            height: 40px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.4);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: .3s ease;
        }
        .btn:hover{
            background: rgba(255, 255, 255, 0.3);
        }
        #registerBtn{
            margin-left: 15px;
        }
        .btn.white-btn{
            background: rgba(255, 255, 255, 0.7);
        }
        .btn.btn.white-btn:hover{
            background: rgba(255, 255, 255, 0.5);
        }
        .nav-menu-btn{
            display: none;
        }


        .cart{
            position: fixed;
            top: 0;
            right: -100%;
            width: 360px;
            min-height: 100vh;
            max-height: 100vh;
            overflow-y: auto;
            padding: 20px;

            background: rgba(70, 70, 70, 0.194);
            backdrop-filter: blur(18px);
            box-shadow: -2px 0 4px hsl(0 4% 15% / 10%);
            transition: .3s ease;
            z-index: 100;
        }
        .cart.active{
            right: 0;
        }
        .cart-title{
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 1rem;
            color: var(--main-color);
        }

        .cart-content{
            color: var(--main-color);
            width: 800;
        }
        .cart-box{
            display: grid;
            grid-template-columns: 32% 50% 18%;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        .cart-img{
            width: 100px;
            height: 100px;
            object-fit: contain;
       
        }
        .cart-price{
            font-weight: 500;
        }
        .cart-quantity{
            outline-color: var(--main-color);
            width: 2.4rem;
            text-align: center;
            font-size: 1rem;
        }
        .cart-remove {
            font-size: 24px;
            cursor: pointer;
        }
        .cart-product-title{
            color: #ffffff;
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .detail-box{
            display: grid;
            color: #131924;
        }
        .total{
            display: flex;
            justify-content: flex-end;
            margin-top: 1.5rem;
            border-top: 2px solid #ffffff93;    
        }
        .total-title{
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
        }
        .total-price{
            margin-left: .5rem;
            color: #fff;
        }
        .btn-buy{
            display: flex;
            margin: 1.5rem auto 0 auto;
            padding: 12px 20px;
            border: none;
            background: var(--main-color);
            color: var(--bg-color);
            font-size: 1rem;
            font-weight: 500;
            transition: .4s ease;
        }
        .btn-buy:hover{
            background: #3c3c3c;
            color: #ffffff;
        }
        #close-cart{
            position: absolute;   
            top: 1.2rem;
            right: 1.1rem;
            font-size: 2rem;
            color: #fff;
        }
        .section-title{
            font-size: 2.5rem;
            font-weight: 600;
            margin-top: 120px;
            margin-bottom: 1.5rem;
        }
        .search{
            display: flex;
            align-items: center;
            width: 300px;
            height: 60px;
            background-color: #cdcdcd;
            border-radius: 5px;
            padding: 3px;
            margin-bottom: 20px;
        }
        .search > i{
            font-size: 20px;
            color: #131313;
            padding: 10px;
        }
        .search > input{
            flex: 1;
            height: 20px;
            border: none;
            outline: none;
            font-size: 14px;
            background: transparent;
            color: #fff;
        }
        .search_bx2{
            width: 200px;
            height: 20px;
            color: rgb(0, 0, 0);
            border: 1px solid #fff;
        }
        .shop {
            margin-top: 2rem;
        }
        .shop-content{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px,auto));
            gap: 2rem;
            margin-bottom: 45px;
            
        }
        .add-cart:hover{
            background: hsl(251, 28%, 24%);
        }

        .desc_cont{
            color: #929292;
            text-align:justify;
            word-break:keep-all;
        }

        .borderline{

            width: 100%;
            border: 1px solid #a1a1a184;
            margin-bottom: -15px;
        }

        .sell_btn{
            color: #9ac9ff;
            text-align:justify;
            word-break:keep-all;
            font-weight: 600;
        }

        .sell_btn a{
            color: #9ac9ff;
        }



        .CategoryList label{
            display: block;
            padding: 4px 0;
        }

        /* Filter feature */
        .dropdown {
            position: relative;
            display: flex;
            background-color: #cdcdcd;
            border-radius: 5px;
            height: 60px;
            align-items: center;

        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #ffffff;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: .5em;

        }

        .dropdown-content label {
            padding: 8px 16px;
            display: block;
            cursor: pointer;
            color: #202020;
        }

        .dropdown-content label:hover {
            background-color: #171427c8;
            color: #ffffff;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown:hover .dropbtn {
            background-color: #171427de;
            color: #ffffff;
        } 

        .dropbtn {
            background-color: transparent;
            color: #131313;
            padding: 10px;
            font-size: 14px;
            border: none;
            border-radius: 2px; 
            justify-content: center;
            align-items: center;
            text-transform: uppercase;
            font-weight: 500;
            cursor: url(../image/cursor.png), auto;
        }

        .searchContainer{
            display: flex;
            justify-content: space-between;
            margin-bottom: 17px;
            
        }


        @media (max-width:1080px){
            .nav {
                padding:15px;
            }
            section{
                padding: 3rem 0 2rem;
            }
            .container {
                margin: 0 auto;
                width: 90%;
            }
            .shop{
                margin-top: 2rem !important;
            }
            .searchContainer{
                display: grid;
                padding: 10px;
            }
            .filterbox{
                margin-top: 20px;
            }

            #filter-container{
                width: 170px;
            }
        }
        @media (max-width:400px){
            .nav{
                padding: 11px;
            }
            .logo{
                font-size: 1rem;
            }
            .cart{
                width: 320px;
            }
            .section-title{
                margin-top: 2px;
            }
            
        }
        @media (max-width:360px){
            .shop{
                margin-top: 1rem !important;
            }
            .cart{
                width: 280px;
            }
        }

        .imagecontent{
            display: flex;
            margin-bottom: 20px;
            gap: 20px;
        }


        .price-filter {
            display: flex;
            align-items: center;
            height: 5%;
            padding: 14px;
            background: #cdcdcd; /* Matches the background color */
            border: 1px solid var(--text-color);
            border-radius: 5px;
            width: 300px;
        }


        .price-filter label {
            display: block;
            padding-top: 5px;
            font-size: 0.9rem; /* Reduced font size */
            font-weight: 500; /* Slightly lighter weight */
            margin-bottom: 6px;
            text-transform: uppercase;
            color: #131313;
        }


        #priceRange {
            width: 50%;
            -webkit-appearance: none; /* Remove default styling */
            background: var(--bg-color);
            height: 5px; /* Reduced height */
            border-radius: 4px; /* Reduced border radius */
            outline: none;
            margin-left: 20px;
            margin-right: 20px;
        }

        #priceRange::-webkit-slider-thumb {
            -webkit-appearance: none; /* Remove default styling */
            appearance: none;
            width: 12px; /* Reduced thumb width */
            height: 12px; /* Reduced thumb height */
            background: #7499d8;
            cursor: pointer;
            border-radius: 50%;
        }

        #priceRange::-moz-range-thumb {
            width: 10px;
            height: 10px;
            background: var(--text-color);
            cursor: pointer;
            border-radius: 50%;
        }
        .bxs-filter-alt{
            margin-left: 5px;
            font-size: 1rem;
            align-items: center;
        }

        #priceValue {
            width: 50%;
            border-radius: 5px;
            padding: 3px;
            color: var(--main-color);
            font-size: 0.9rem; 
            box-sizing: border-box;
            align-items: center; 
            background-color: #f1f1f1;
            border: none;

        }

        #filter-container{
            background: #cdcdcd;
            height: 60px;
            border-radius: 5px;
            padding-right: 10px;
            padding-left: 10px;
            display: flex;
            align-items: center;
        }

        .sort-price{
            color: #131313;
            font-size: .9rem;
            font-weight: 500;
            margin-right: 5px;
        }

        #select{
            margin-left: 5px;
            border-radius: 6px;
            padding: 5px;
            border: none;
        }

        #sort-price{
                border-radius: 5px;
                padding: 3px;
                color: var(--main-color);
                font-size: 0.7rem;
                box-sizing: border-box;
                align-items: center; 
                background-color: #f1f1f1;
        }

        .qty{
            color: #131924;
        }

        .quantity-input{
            width: 30px;
            height: 30px;
            color: #fff;
            background-color: #171427;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /*
         .alert {
            top: 122px;
            right: 30px;
            text-align: center;
            padding: 15px;
            width: fit-content;
            background-color: #6375ffb5;
            color: white;
            border-radius: 5px;
            z-index: 2;
            padding: 20px;
            position: fixed;
            right: 20px;
            animation: slideIn 0.5s forwards, slideOut 0.5s 4.5s forwards;
        } 

        .alert.success {
            background-color: #6375ffb5;
        } */

        .gap-icon{
            gap: 10px;
            
        }

        .profile-icon{
            margin-left: 40px;
        }
        

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
                "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: rgb(22, 20, 24);
            color: #eee;
            user-select: none;
        }
  
        code {
            font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",monospace;
        }


        .nft{
    user-select:none;
    max-width: 400px;
    margin: 0rem auto;
    border: 1px solid #ffffff22;
    background-color: #282c34;
    background: linear-gradient(0deg, rgba(40,44,52,1) 0%, rgba(17,0,32,.5) 100%);
    box-shadow: 0 7px 20px 5px #00000088;
    border-radius: .7rem;
    backdrop-filter: blur(7px);
    -webkit-backdrop-filter: blur(7px);
    overflow: hidden;
    transition: .5s all;
    hr{
      width: 100%;
      border: none;
      border-bottom: 1px solid #88888855;
      margin-top: 0;
    }
    ins{
      text-decoration: none;
    }
    .main{
      display: flex;
      flex-direction: column;
      width: 100%;
      padding: 1rem;
      .tokenImage{
        margin-left: ;
        border-radius: .5rem;
        max-width: 120%;
        height: 240px;
        object-fit: cover;
      }
      .description{
        margin-top: 15px;
        margin-bottom: 15px;
        color: #a89ec9;
      }
      .tokenInfo{
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
        margin-bottom: 10px;
        .price{
          display: flex;
          align-items: center;
          color: #ee83e5;
          font-weight: 700;
          ins{
            margin-left: -.3rem;
            margin-right: .5rem;
          }
        }
        .duration a{
          display: flex;
          align-items: center;
          color: #a89ec9;
          margin-right: .2rem;
          text-decoration: none;
          ins{
            margin: .5rem;
            margin-bottom: .4rem;
          }
        }
      }
      .creator{
        display: flex;
        align-items: center;
        margin-top: .4rem;
        margin-bottom: -.3rem;
        ins{
          color: #a89ec9;
          text-decoration: none;
        }
        .wrapper{
          display: flex;
          align-items: center;
          border: 1px solid #ffffff22;
          padding: .3rem;
          margin: 0;
          margin-right: .5rem;
          border-radius: 100%;
          box-shadow: inset 0 0 0 4px #000000aa;
          img{
            border-radius: 100%;
            border: 1px solid #ffffff22;
            width: 2rem;
            height: 2rem;
            object-fit: cover;
            margin: 0;
          }
        }
      }
    }
    ::before{
      position: fixed;
      content: "";
      box-shadow: 0 0 100px 40px #ffffff08;
      top: -10%;
      left: -100%;
      transform: rotate(-45deg);
      height: 60rem;
      transition: .7s all;
    }
    &:hover{
      border: 1px solid #ffffff44;
      box-shadow: 0 7px 50px 10px #000000aa;
      transform: scale(1.015);
      filter: brightness(1.3);
      ::before{
        filter: brightness(.5);
        top: -100%;
        left: 200%;
      }
    }
  }
  
  .bg{
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    h1{
      font-size: 20rem;
      filter: opacity(0.5);
    }
  }

  .shop-content{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px,auto));
    gap: 2rem;
    margin-bottom: 45px;
}   

    .main h2{
        font-size: 1.2rem;
        margin-top: 10px;
    }

    .text-content1{
        position: fixed;
        display: inline-block;
        height: 100vh;
        align-items: center;
        z-index: -1;
    }

    .text-content1 h1{
        font-size: 32rem;
        margin-left: 25%;
        color: #ffffff15;
        transform: translateX(-30%);
        
    }

    #preloader{
        background: #000 url(video/preloader.gif) no-repeat center;
        height: 100vh;
        width: 100%;
        position: fixed;
        z-index: 104;
    }
     </style>


<style>
.notifications {
    position: fixed;
    top: 100px;
    right: 5px;
    z-index: 101;
}

.toast {
    position: relative;
    padding: 10px;
    color: #fff;
    margin-bottom: 10px;
    width: 400px;
    display: grid;
    grid-template-columns: 70px 1fr 70px;
    border-radius: 5px;
    --color: #0abf30;
    background-image: linear-gradient(to right, #0abf3055, #22242f 30%);
    animation: show 0.3s ease 1 forwards;
}

.toast i {
    color: var(--color);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: x-large;
}

.toast .title {
    font-size: x-large;
    font-weight: bold;
}

.toast span, .toast i:nth-child(3) {
    color: #fff;
    opacity: 0.6;
}

@keyframes show {
    0% {
        transform: translateX(100%);
    }
    40% {
        transform: translateX(-5%);
    }
    80% {
        transform: translateX(0%);
    }
    100% {
        transform: translateX(-10%);
    }
}

.toast::before {
    position: absolute;
    bottom: 0;
    left: 0;
    background-color: var(--color);
    width: 100%;
    height: 3px;
    content: '';
    box-shadow: 0 0 10px var(--color);
    animation: timeOut 5s linear 1 forwards;
}

@keyframes timeOut {
    to {
        width: 0;
    }
}

.toast.error {
    --color: #f24d4c;
    background-image: linear-gradient(to right, #f24d4c55, #22242F 30%);
}

.toast.warning {
    --color: #e9bd0c;
    background-image: linear-gradient(to right, #e9bd0c55, #22242F 30%);
}

.toast.info {
    --color: #3498db;
    background-image: linear-gradient(to right, #3498db55, #22242F 30%);
}


</style>

    
</head>
<body>
    
    <div class="notifications"></div>

    <div class="text-content1">
        <h1>Mafia</h2>
    </div>

    <div class="notifications"></div>
    {{#if successMessage}}

    {{/if}}

    {{#if errorMessage}}

    {{/if}}
    

    {{!-- Header new --}}
    <header>
        <div class="nav">
            <div class="nav-logo">
                <a href="/"><p>Mafia</p></a>
            </div>
            <div class="nav-menu" id="navMenu">
                <ul>
                    <li><a href="#" class="link active" onmousedown="error.play();">Dashboard</a></li>
                    <li><a href="./sell"  class="link" onmousedown="audio.play();">List Product</a></li>
                    <li><a href="./profile" class="link" onmousedown="audio.play();">Profile</a></li>
                    <li><i class="bx bx-shopping-bag" id="cart-icon"></i></li>
                </ul>
                
            </div>
            
        </div>
    </header>
    <div class="cart">
                <div class="cart-content">
                    {{> cart}}
                </div>
            </div>
    
    <section class="shop container">
        
        <h2 class="section-title">GTA 5 | Exclusive Collection</h2>
        <p class="desc_cont">Welcome to your ultimate black-market paradise, inspired by the gritty streets of Los Santos. 
            Step into our immersive dashboard and experience the thrill of the underworld with our 
            exclusive selection of luxury cars, prime real estate, high-end bikes, and state-of-the-art 
            weaponry. Our marketplace offers everything you need to dominate the city, just like in GTA 5. 
            Navigate through our dark-themed interface, designed to give you the authentic feel of the game, and secure your place among the elite with our premium offerings. <br><br>
            <p class="sell_btn">Want to sell your luxury? <a href="./sell">Click Here <i class='bx bx-link-external'></i></a></p><br>
            <div class="borderline"></div>
            <br><br>
        </p>
        
        <div class="searchContainer">
        {{!-- Search Box --}}
            <div class="search">
                <i class="bx bx-search" id="cart-icon"></i>
                <input type="text" id="search-item" placeholder="Search Model" onkeyup="search()">
            </div>

            <div class="price-filter">
                <label for="priceRange" class="price-budget">Budget</label>
                <input type="range" id="priceRange" min="0" step="0.01">
                <input type="number" id="priceValue" step="0.01" min="0">
            </div>


                <div id="filter-container">
                    <label for="sort-price" class="sort-price">SORT</label>
                    <select id="select">
                        <option value="default">Default</option>
                        <option value="LowToHigh">Low to High</option>
                        <option value="HighToLow">High to Low</option>
                    </select>
                </div>

                <div class="filterbox">
                <div class="dropdown">
                    <button class="dropbtn">APPLY FILTER<i class='bx bxs-filter-alt' style='color:#131313'></i></button>
                    <div class="dropdown-content CategoryList">
                        <ul>
                            {{!-- 
                            <li>
                                <label>
                                    Mens 
                                    <input type="checkbox">
                                    <span class="check"></span>
                                </label>
                            </li>
                             --}}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="shop-content" >

            {{#each products}}
            <div class="nft product-box" data-price={{this.price}}>
                <div class='main'>
                    <img class='tokenImage' src="/uploads/{{this.imageurl}}" alt="{{this.title}}"  class="product-img" />
                    <h2 class="product-title">{{this.title}}</h2>
                    <p class='description product-desc'>{{this.description}}</p>
                    <p class='price' data-price="{{this.price}}">$<span class="formatted-price">{{this.price}}</span></p>
                    <div class='tokenInfo'>
                        <div class="price">
                            <ins>◘</ins>
                            <p class="product-type">{{this.type}}</p>
                        </div>
                        <div class="duration">
                            {{!-- navivating btn --}}
                            <p> <a href="/dashboard/{{this._id}}">learn more</a></p>
                        </div>
                    </div>
                    <hr />
                    <div class='creator'>
                        <div class='wrapper'>
                            <img src="image/profileimg.png" alt="Creator" />
                        </div>
                        <p><ins>Lock Deal with</ins> Mafia</p>
                        <form action="/cart/add" method="POST">
                            <input type="hidden" name="productId" value="{{this._id}}" hidden>
                            <input type="number" name="quantity" value="1" min="1" class="quantity-input" hidden>
                            <button class="button-10" role="button">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
        {{/each}}
    </section>


    <audio id="hover-sound" src="audio/hover.mp3"></audio>
    
    <div id="preloader"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Function to format the price
    function formatPrice(price) {
        if (price >= 1000000) {
            return (price / 1000000).toFixed(1) + 'M';
        }
        return price.toLocaleString();
    }

    // Function to update all prices on the page
    function updatePrices() {
        const priceElements = document.querySelectorAll('.price');
        priceElements.forEach(function(priceElement) {
            const price = parseFloat(priceElement.dataset.price);
            if (!isNaN(price)) {
                const formattedPrice = formatPrice(price);
                priceElement.querySelector('.formatted-price').textContent = formattedPrice;
            } else {
                console.error('Invalid price:', priceElement.dataset.price);
            }
        });
    }

    updatePrices();
});
</script>


<script>
        document.addEventListener('DOMContentLoaded', function() {
            function formatPrice(price) {
                if (price >= 1000000) {
                    return (price / 1000000).toFixed(1) + 'M';
                }
                return price.toLocaleString();
            }

            function updatePrices() {
                const priceElements = document.querySelectorAll('.classPrice');

                priceElements.forEach(function(priceElement) {
                    const price = parseFloat(priceElement.dataset.price);
                    if (!isNaN(price)) {
                        const formattedPrice = formatPrice(price);
                        priceElement.querySelector('.formatted-price').textContent = formattedPrice;
                    } else {
                        console.error('Invalid price:', priceElement.dataset.price);
                    }
                });
            }

            function updateTotalPrice() {
                const priceElements = document.querySelectorAll('.classProd');
                let totalPrice = 0;

                priceElements.forEach(function(priceElement) {
                    const price = parseFloat(priceElement.dataset.price);
                    const quantity = parseInt(priceElement.dataset.quantity);
                    if (!isNaN(price) && !isNaN(quantity)) {
                        totalPrice += price * quantity;
                    }
                });

                const formattedTotalPrice = formatPrice(totalPrice);
                document.getElementById('total-price').textContent = `$${formattedTotalPrice}`;
            }

            updatePrices();
            updateTotalPrice();
        });
    </script>


    <script>
        var loader = document.getElementById('preloader');
         
         window.addEventListener("load", function(){
            loader.style.display = "none";
         })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hoverSound = document.getElementById('hover-sound');
            const cards = document.querySelectorAll('.product-box');

            cards.forEach(card => {
                card.addEventListener('mouseover', () => {
                    hoverSound.currentTime = 0;
                    hoverSound.play();
                });
            });
        });
    </script>
    
    
    
    {{!-- sort by user's Budget --}}
    <script>

        document.addEventListener('DOMContentLoaded', () => {


            // Get all the product prices
            const prices = Array.from(document.querySelectorAll('.product-box'))
                .map(product => parseFloat(product.getAttribute('data-price')));

            // Determine the min and max prices
            const minPrice = Math.min(...prices);
            const maxPrice = Math.max(...prices);

            // Get the input elements
            const priceRange = document.getElementById('priceRange');
            const priceValue = document.getElementById('priceValue');

            // Set the min and max values for the inputs
            priceRange.min = minPrice;
            priceRange.max = maxPrice;
            priceValue.min = minPrice;
            priceValue.max = maxPrice;

            // Set initial values
            priceRange.value = maxPrice;
            priceValue.value = maxPrice;

            // Event listeners for synchronizing the inputs
            priceRange.addEventListener('input', () => {
                priceValue.value = priceRange.value;
                filterProductsByPrice(priceRange.value);
            });

            priceValue.addEventListener('input', () => {
                if (priceValue.value > maxPrice) priceValue.value = maxPrice;
                if (priceValue.value < minPrice) priceValue.value = minPrice;
                priceRange.value = priceValue.value;
                filterProductsByPrice(priceValue.value);
            });

            // Function to filter products by price
            function filterProductsByPrice(maxPrice) {
                const productBoxes = document.querySelectorAll('.product-box');
                productBoxes.forEach(box => {
                    const productPrice = parseFloat(box.getAttribute('data-price'));
                    if (productPrice <= maxPrice) {
                        box.style.display = 'block';
                    } else {
                        box.style.display = 'none';
                    }
                });
            }
        });

    </script>

    {{!-- Filter feature --}}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const products = Array.from(document.querySelectorAll(".product-box"));
            const categories = [...new Set(products.map(product => product.querySelector(".product-type").textContent.trim()))];

            const categoryList = document.querySelector(".CategoryList ul");

            categories.forEach(category => {
                const li = document.createElement("li");
                li.innerHTML = `
                    <label>
                        ${category}
                        <input type="checkbox" class="category-checkbox" value="${category}">
                        <span class="check"></span>
                    </label>
                `;
                categoryList.appendChild(li);
            });

            const checkboxes = Array.from(document.querySelectorAll(".category-checkbox"));

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener("change", filterProducts);
            });

            function filterProducts() {
                const selectedCategories = checkboxes
                    .filter(checkbox => checkbox.checked)
                    .map(checkbox => checkbox.value);

                if (selectedCategories.length === 0) {
                    products.forEach(product => product.style.display = "");
                } else {
                    products.forEach(product => {
                        const productCategory = product.querySelector(".product-type").textContent.trim();
                        if (selectedCategories.includes(productCategory)) {
                            product.style.display = "";
                        } else {
                            product.style.display = "none";
                        }
                    });
                }
            }
        });

    </script>
    {{!-- Search Tools --}}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const sortSelect = document.getElementById('select');
            const productContainer = document.querySelector('.shop-content');
            const products = Array.from(productContainer.querySelectorAll('.product-box'));

            // Store the initial order of the products
            const initialProductsOrder = products.map(product => product.outerHTML);

            sortSelect.addEventListener('change', function() {
                const sortOption = this.value;

                if (sortOption === 'LowToHigh') {
                    products.sort((a, b) => parseFloat(a.dataset.price) - parseFloat(b.dataset.price));
                } else if (sortOption === 'HighToLow') {
                    products.sort((a, b) => parseFloat(b.dataset.price) - parseFloat(a.dataset.price));
                } else if (sortOption === 'default') {
                    productContainer.innerHTML = initialProductsOrder.join('');
                    return; // Exit the function early
                }

                // Clear the current product list
                productContainer.innerHTML = '';

                // Append the sorted products back to the container
                products.forEach(product => productContainer.appendChild(product));
            });
        });


    </script>


    {{!-- Search and Cart Open Feature --}}
    <script>
        let cartIcon = document.querySelector("#cart-icon");
        let cart = document.querySelector(".cart");
        let closeCart = document.querySelector("#close-cart");

        cartIcon.onclick = () => {
            fetch('cart')
                .then(response => response.text())
                .then(data => {
                    cart.innerHTML = data;
                    cart.classList.add("active");
                })
                .catch(error => console.error('Error loading cart:', error));
        };

        closeCart.onclick = () => {
            cart.classList.remove("active");
        };

        if (document.readyState == 'loading'){
            document.addEventListener("DOMContentLoaded", ready);
        } else {
            ready();
        }

        function search() {
            const searchInput = document.getElementById('search-item').value.toUpperCase();
            const productBoxes = document.querySelectorAll('.product-box');
            productBoxes.forEach(box => {
                const title = box.querySelector('.product-title').innerText.toUpperCase();
                if (title.indexOf(searchInput) > -1) {
                    box.style.display = '';
                } else {
                    box.style.display = 'none';
                }
            });
        }

        var audio = new Audio();
        audio.src='audio/click.mp3';
        var error = new Audio();
        error.src = 'audio/error.mp3';

    </script>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const notifications = document.querySelector('.notifications');
                const successMessage = "{{successMessage}}";    
                const errorMessage = "{{errorMessage}}";

                function createToast(type, icon, title, text) {
                    let newToast = document.createElement('div');
                    newToast.innerHTML = `
                        <div class="toast ${type}">
                            <i class="${icon}"></i>
                            <div class="content">
                                <div class="title">${title}</div>
                                <span>${text}</span>
                            </div>
                            <i class="fa-solid fa-xmark" onclick="(this.parentElement).remove()"></i>
                        </div>`;
                    notifications.appendChild(newToast);
                    newToast.timeOut = setTimeout(() => newToast.remove(), 5000);
                }
               
            });


            
        </script>
        
</body>
</html>